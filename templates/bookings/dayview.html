{% extends "base.html" %}
{% load static %} 
{% block header %}
    <title>Booking Slots for {{ day }}</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"> -->

{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8 d-flex justify-content-evenly">
        <div class="wrapper" id="services">
            <h2>Booking Slots for {{ day }} </h2>
            <div class="row justify-content-around"> 
                {% for service in services %}
                    <div class="col-auto service-item"
                        data-name={{service.name}}
                        data-description={{service.description}}
                        data-price={{service.price}}
                        data-slotsnumber="{{service.slots}}"
                        onclick="handleClick(this)"
                    > 
                        <div> 
                            <h3>{{ service.name }}</h3>
                            <p> {{service.description}}<br>
                                <span style="font-size: larger; font-weight: bold;"> 
                                    Â£ {{service.price}}
                                </span>
                                <br>
                                <span>{{service.slots}} </span>
                            </p> 
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{%  for message in messages %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>{{message}}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}


<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8 d-flex justify-content-center">
            <div class="col d-flex justify-content-center content-fit">
                <div>
                    <a href="{{ prev_day_url }}" class="custom-link"><span class="icon-lrg">&#8592;</span>Previous Day</a>
                </div>    
            </div>
            <div class="col d-flex justify-content-center content-fit">
                <div>
                    <a href="{{ next_day_url }}" class="custom-link"><span class="icon-lrg ">&#8594;</span>Next Day</a>
                </div>
            </div>
        </div>
    <div class="col-md-2"></div>
</div>

<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8 d-flex justify-content-evenly">

        <div class="wrapper" id="times">
            <div class="slots">
                {% for slot in slots %}
                    {% if slot in booked_slots %}
                        <div class="slot">
                            <div class="booked">
                                <strong>{{ slot }}</strong> Booked
                            </div>
                        </div>
                    {% else %}
                        <div class="slot">
                            <div class="available"
                                onclick="handleSlot(this)"
                                data-slot= {{slot}}
                                data-date ="{{day}}"
                            >
                                <strong>{{ slot }}</strong> - Available
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

</div>

<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8 d-flex justify-content-center">
        <div class="wrapper" id="confirm">
            <div>
                <form id="form">
                    {% csrf_token %}
                    <div class="" id="selected-details"></div>
                    <div class="" id="confirm-selected"></div>
                    <div class="show-confirm" id="show-confirm">
                        <input class="btn btn-info btn-confirm" type="submit" value="Confirm and Pay">
                    </div>
                </form>
            </div>
        </div>
    </div>
    </div>
</div>


<script src="{% static 'js/booking.js' %}"></script>


{% endblock %}